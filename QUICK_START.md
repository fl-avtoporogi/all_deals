# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: fast_update_deals.php

## ‚ö° –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# 1. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (100 —Å–¥–µ–ª–æ–∫)
php fast_update_deals.php --limit=100

# 2. –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–¥–µ–ª–∫–∏
php fast_update_deals.php

# 3. –û–±–Ω–æ–≤–∏—Ç—å –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü
php fast_update_deals.php --days=30

# 4. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–æ—Ä–æ–Ω–∫—É
php fast_update_deals.php --funnel=5

# 5. –û–±–Ω–æ–≤–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω ID
php fast_update_deals.php --from-id=100000 --to-id=110000

# 6. –°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (–µ—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–ª–æ)
php fast_update_deals.php --reset
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏

| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | refresh_deals.php | fast_update_deals.php | –†–∞–∑–Ω–∏—Ü–∞ |
|------------|-------------------|------------------------|---------|
| 100 —Å–¥–µ–ª–æ–∫ | ~1 –º–∏–Ω | **~15 —Å–µ–∫** | 4x –±—ã—Å—Ç—Ä–µ–µ |
| 1 000 —Å–¥–µ–ª–æ–∫ | ~10 –º–∏–Ω | **~30 —Å–µ–∫** | 20x –±—ã—Å—Ç—Ä–µ–µ |
| 10 000 —Å–¥–µ–ª–æ–∫ | ~100 –º–∏–Ω | **~4 –º–∏–Ω** | 25x –±—ã—Å—Ç—Ä–µ–µ |
| 100 000 —Å–¥–µ–ª–æ–∫ | ~16 —á–∞—Å–æ–≤ | **~50 –º–∏–Ω** | 19x –±—ã—Å—Ç—Ä–µ–µ |

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –®–∞–≥ 1: –¢–µ—Å—Ç –Ω–∞ 10 —Å–¥–µ–ª–∫–∞—Ö

```bash
php fast_update_deals.php --limit=10
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úì –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
‚úì –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤...
  ‚Üí –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∫–æ–¥–æ–≤ –±–æ–Ω—É—Å–æ–≤: 156
  ‚Üí –ó–∞–≥—Ä—É–∂–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π: 23
‚úì –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–¥–µ–ª–æ–∫ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏...
  ‚Üí –ù–∞–π–¥–µ–Ω–æ —Å–¥–µ–ª–æ–∫: 10
  ‚Üí –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è: 00:00:05

–ü–∞–∫–µ—Ç 1/1 (10 —Å–¥–µ–ª–æ–∫):
  ‚úì –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 10/10 (100.0%) | OK:10 ERR:0

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–ó–ê–í–ï–†–®–ï–ù–û
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ:        10
–£—Å–ø–µ—à–Ω–æ:           10
–û—à–∏–±–æ–∫:            0
–í—Ä–µ–º—è:             00:00:03
–°–∫–æ—Ä–æ—Å—Ç—å:          200.0 —Å–¥–µ–ª–æ–∫/–º–∏–Ω
```

---

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î

```sql
SELECT
    deal_id,
    title,
    opportunity,
    bonus_category_a,
    bonus_category_b,
    updated_at
FROM all_deals
ORDER BY updated_at DESC
LIMIT 10;
```

**–û–∂–∏–¥–∞–µ–º:** –°–≤–µ–∂–∏–µ –¥–∞—Ç—ã –≤ `updated_at` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫.

---

## üéØ –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è

```bash
# –í crontab
0 3 * * * cd /path/to/all_deals && php fast_update_deals.php --days=1
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–∞–∂–¥–æ–µ —É—Ç—Ä–æ –≤ 3:00 –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤—á–µ—Ä–∞—à–Ω–∏–µ —Å–¥–µ–ª–∫–∏ (~5 –º–∏–Ω—É—Ç)

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ò–∑–º–µ–Ω–∏–ª–∏—Å—å —Ç–∞—Ä–∏—Ñ—ã –±–æ–Ω—É—Å–æ–≤

```bash
# 1. –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É bonus_codes
# 2. –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫—ç—à
rm bonus_codes_cache.json

# 3. –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –≤—Å–µ —Å–¥–µ–ª–∫–∏
php fast_update_deals.php
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–æ—Ä–æ–Ω–∫–∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
php fast_update_deals.php --funnel=5 --days=7
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–¥–µ–ª–∫–∏ –≤–æ—Ä–æ–Ω–∫–∏ 5 –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é

---

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
watch -n 1 "tail -20 /path/to/output.log"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

```bash
cat fast_update_progress.json
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```json
{
    "last_deal_id": 105432,
    "processed": 5230,
    "successful": 5228,
    "errors": 2,
    "total": 10000,
    "timestamp": "2025-11-17 15:30:45"
}
```

---

## ‚ö†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î"

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ë–î
php -r "require '../db_connect.php'; var_dump(\$config);"
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ batch"

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç API

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç (–ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –º–µ—Å—Ç–∞)

---

### –ü—Ä–æ–±–ª–µ–º–∞: "–ü—É—Å—Ç—ã–µ –∫–æ–¥—ã –±–æ–Ω—É—Å–æ–≤"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –ø–æ–ª–µ property221 –≤ —Ç–æ–≤–∞—Ä–∞—Ö

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```php
php -r "
require 'src/crest.php';
\$r = CRest::call('catalog.product.get', ['id' => 123]);
var_dump(\$r['result']['product']['property221']);
"
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∫—Ä–∏–ø—Ç –∑–∞–≤–∏—Å

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
ps aux | grep fast_update

# 2. –£–±–∏—Ç—å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
kill -9 [PID]

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å (–ø—Ä–æ–¥–æ–ª–∂–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
php fast_update_deals.php
```

---

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞ (2 –∑–∞–ø—Ä–æ—Å–∞/—Å–µ–∫)

```bash
# –£–∂–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ! –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ:
php fast_update_deals.php
```

---

### –î–ª—è Enterprise —Ç–∞—Ä–∏—Ñ–∞ (5 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫)

**–ú–æ–∂–Ω–æ —É—Å–∫–æ—Ä–∏—Ç—å, –∏–∑–º–µ–Ω–∏–≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ —Å–∫—Ä–∏–ø—Ç–µ:**

```php
// –í –Ω–∞—á–∞–ª–µ fast_update_deals.php
define('DEALS_PER_BATCH', 15);  // –ë—ã–ª–æ 10
// –¢–µ–ø–µ—Ä—å: 15 —Å–¥–µ–ª–æ–∫ √ó 2 batch = 30 –∑–∞–ø—Ä–æ—Å–æ–≤/–ø–∞–∫–µ—Ç
// –ü—Ä–∏ –∑–∞–¥–µ—Ä–∂–∫–µ 0.5 —Å–µ–∫ = 60 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫ (–±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è Enterprise)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ 6000 —Å–¥–µ–ª–æ–∫/–º–∏–Ω –≤–º–µ—Å—Ç–æ 2500

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏

### –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –∑–∞ –∫–≤–∞—Ä—Ç–∞–ª

```bash
# –°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ —Ñ–∏–ª—å—Ç—Ä –≤ –∫–æ–¥ (—Å–º. FAST_UPDATE_README.md)
php fast_update_deals.php --days=90 --status=WON
```

---

### –û–±–Ω–æ–≤–∏—Ç—å —Å–¥–µ–ª–∫–∏ —Å –±–æ–ª—å—à–æ–π —Å—É–º–º–æ–π

```bash
# –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞ min_amount
php fast_update_deals.php --min-amount=100000
```

---

### –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ –≤–æ—Ä–æ–Ω–∫–∞–º

```bash
# –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –≤–æ—Ä–æ–Ω–∫–∏ –ø–æ –æ—á–µ—Ä–µ–¥–∏
for funnel in 1 2 3 4 5; do
    php fast_update_deals.php --funnel=$funnel
    sleep 60  # –ü–∞—É–∑–∞ –º–µ–∂–¥—É –≤–æ—Ä–æ–Ω–∫–∞–º–∏
done
```

---

## üéì –ü–æ–Ω–∏–º–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞ —Å–∫—Ä–∏–ø—Ç–∞

```
–ü–∞–∫–µ—Ç 5/100 (10 —Å–¥–µ–ª–æ–∫):
  ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö 10 —Å–¥–µ–ª–æ–∫ —á–µ—Ä–µ–∑ batch...
  ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö 45 —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞...
  ‚Üí –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...
  ‚úì –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 50/1000 (5.0%) | OK:48 ERR:2 | 2847.5 —Å–¥–µ–ª–æ–∫/–º–∏–Ω | ETA: 00:00:20 | –í—Ä–µ–º—è –ø–∞–∫–µ—Ç–∞: 1.3 —Å–µ–∫
```

**–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞:**
- `50/1000 (5.0%)` - –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ 50 –∏–∑ 1000 —Å–¥–µ–ª–æ–∫ (5%)
- `OK:48 ERR:2` - —É—Å–ø–µ—à–Ω–æ 48, –æ—à–∏–±–æ–∫ 2
- `2847.5 —Å–¥–µ–ª–æ–∫/–º–∏–Ω` - —Ç–µ–∫—É—â–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
- `ETA: 00:00:20` - –æ—Å—Ç–∞–ª–æ—Å—å –ø—Ä–∏–º–µ—Ä–Ω–æ 20 —Å–µ–∫—É–Ω–¥
- `–í—Ä–µ–º—è –ø–∞–∫–µ—Ç–∞: 1.3 —Å–µ–∫` - —ç—Ç–æ—Ç –ø–∞–∫–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω –∑–∞ 1.3 —Å–µ–∫—É–Ω–¥—ã

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** 4ias.ru
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** FAST_UPDATE_README.md
**–í–µ—Ä—Å–∏—è:** 1.0

---

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. ‚ö° **–í 3-25 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ** —á–µ–º refresh_deals.php
2. üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ** - –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç—ã API
3. üéØ **–ì–∏–±–∫–æ** - –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤
4. üíæ **–ù–∞–¥–µ–∂–Ω–æ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
5. üìä **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ** - –ø–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–ù–∞—á–Ω–∏—Ç–µ —Å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –Ω–∞ 100 —Å–¥–µ–ª–∫–∞—Ö!**

```bash
php fast_update_deals.php --limit=100
```
